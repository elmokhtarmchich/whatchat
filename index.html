<!DOCTYPE html>
<html lang="en">
<head>
<title>WhatsApp One Click</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
<link href="https://fonts.cdnfonts.com/css/google-sans" rel="stylesheet">
                
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>

body {
   background-color: #1c1c16;
font-family: GT Super,sans-serif;

}
.footer {
   position: fixed;
   left: 0;
   bottom: 0;
   width: 100%;
   height: 80px;
   background-color: gray;
   color: white;
   text-align: center;
     padding: 10px;
}
img {
   height:  100%;
}

.w1-button {
   height:  100%;
  padding: 10px;
}
</style>
</head>
<body>

<form onsubmit="process(event)" action="/action_page.php" class="w3-container w3-card-4 w3-light-grey w3-margin">
<h2 class="w3-center">Phone number input</h2>

<div class="w3-row w3-section">
<p class="">Phone number input</p>
  <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-phone"></i></div>
      <input id="phone" type="tel" name="phone" class="w3-input w3-border" >
</div>

  <button type="submit" class="w3-button w3-block w3-section w3-blue w3-ripple w3-padding" >Check format</button>
  
<div class="alert alert-info" style="display: none;"></div>

</form>

</body>
<footer>
<div class="footer">
<img onclick="openChat()" alt="Chat on WhatsApp" src="./images/whatsapp.png" />
</div>
</footer>

<script>
function getIp(callback) {
 fetch('https://ipinfo.io/json?token=f0076d2b18eca7', { headers: { 'Accept': 'application/json' }})
   .then((resp) => resp.json())
   .catch(() => {
     return {
       country: 'us',
     };
   })
   .then((resp) => callback(resp.country));
}

  const phoneInputField = document.querySelector("#phone");
const phoneInput = window.intlTelInput(phoneInputField, {
 initialCountry: "auto",
   separateDialCode: "false",

 geoIpLookup: getIp,
 utilsScript:
   "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
});

const info = document.querySelector(".alert-info");

function process(event) {
 event.preventDefault();

 const phoneNumber = phoneInput.getNumber();

 info.style.display = "";
 info.innerHTML = `Phone number in E.164 format: <strong>${phoneNumber}</strong>`;
}

function openChat() {
const phoneNumber = phoneInput.getNumber();

    if (phoneNumber.length > 0) {
      window.location.href = "https://api.whatsapp.com/send?phone=" + phoneNumber;
    } else {
      alert("Please enter a valid phone number");
    }
}

</script>
</html>
